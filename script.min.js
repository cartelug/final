document.addEventListener("DOMContentLoaded", () => {
    // --- GENERAL SITE LOGIC ---
    const mobileMenuButton = document.getElementById("mobile-menu-button");
    const mainNav = document.getElementById("main-nav");
    if (mobileMenuButton && mainNav) {
        mobileMenuButton.addEventListener("click", () => {
            mainNav.classList.toggle("active");
        });
    }

    const yearSpan = document.getElementById("year");
    if (yearSpan) {
        yearSpan.textContent = new Date().getFullYear();
    }

    // --- NETFLIX UI ORDER PAGE LOGIC ---
    const startOrderBtn = document.getElementById('start-order-btn');
    const orderFormContainer = document.getElementById('order-form-container');
    const orderForm = document.getElementById('netflix-order-form-v3');

    if (startOrderBtn && orderFormContainer) {
        startOrderBtn.addEventListener('click', () => {
            orderFormContainer.classList.add('active');
            startOrderBtn.style.display = 'none'; // Hide the button after click
            orderFormContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
        });
    }

    if (orderForm) {
        orderForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const clientName = document.getElementById('clientName').value.trim();
            const paymentMethodInput = document.querySelector('input[name="paymentMethod"]:checked');
            
            if (!clientName) {
                alert('Please enter your name.');
                return;
            }
            if (!paymentMethodInput) {
                alert('Please select a payment method.');
                return;
            }

            const paymentMethod = paymentMethodInput.value;
            
            // CORRECTED WHATSAPP MESSAGE FORMAT
            const message = `Order for Cartelug:\n\nService: Netflix\nPackage: 1 Month Premium\nPrice: 25,000 UGX / ~$7 USD\nName: ${clientName}\nPayment Method: ${paymentMethod}`;
            
            window.location.href = `https://wa.me/256762193386?text=${encodeURIComponent(message)}`;
        });
    }
});
